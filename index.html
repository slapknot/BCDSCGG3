<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CORTABLE</title>
  <style>
    /* --- General Styling & Inclusive Green Growth Theme --- */
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;500;700&display=swap');

    :root {
      --primary-color: #006A4E; /* Deep, trustworthy green */
      --secondary-color: #F0F4F3; /* Light, airy green-gray */
      --accent-color: #4CAF50;   /* Vibrant green for actions */
      --discount-color: #D32F2F; /* Strong red for discounts */
      --text-color: #212121;
      --light-text: #616161;
      --card-bg: #FFFFFF;
      --card-radius: 16px; /* Softer, more modern corners */
      --shadow-sm: 0 4px 6px rgba(0,0,0,0.04);
      --shadow-md: 0 10px 20px rgba(0,0,0,0.07);
      --header-height: 80px; /* Increased header height */
      --nav-height: 90px; /* Increased nav height */
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html { height: 100%; }

    body {
      font-family: 'Noto Sans Thai', sans-serif;
      background: var(--secondary-color);
      color: var(--text-color);
      height: 100%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    a { text-decoration: none; color: inherit; }

    /* --- Header with Logo --- */
    header {
      background: var(--card-bg);
      color: var(--primary-color);
      height: var(--header-height);
      display: flex;
      align-items: center;
      padding: 0 24px;
      box-shadow: var(--shadow-sm); 
      z-index: 300;
      flex-shrink: 0;
      border-bottom: 1px solid #e0e0e0;
    }
    .header-logo {
        height: 56px; /* Adjusted logo size */
        width: auto;
    }
    .header-title {
        font-size: 18px; /* Decreased slogan font size */
        font-weight: 500;
        margin-left: 16px;
        letter-spacing: 0.5px;
        color: var(--light-text);
        transition: font-size 0.2s ease;
    }

    /* --- Main Navigation --- */
    .main-nav {
      display: flex; justify-content: center; gap: 1.5rem; /* Increased gap */
      background: var(--card-bg); padding: 12px;
      height: var(--nav-height);
      flex-shrink: 0;
      border-bottom: 1px solid #e0e0e0;
      transition: height 0.2s ease, gap 0.2s ease;
    }
    .nav-item {
      display: flex; flex-direction: column; align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 0 16px;
      border-radius: var(--card-radius);
      cursor: pointer; transition: background-color 0.2s, color 0.2s, padding 0.2s ease;
      color: var(--light-text);
      border: 2px solid transparent;
    }
    .nav-item svg { width: 32px; height: 32px; fill: currentColor; transition: width 0.2s ease, height 0.2s ease; }
    .nav-item span { font-size: 15px; font-weight: 700; transition: font-size 0.2s ease; }
    .nav-item:hover { color: var(--primary-color); }
    .nav-item.active {
      color: var(--primary-color);
      background-color: var(--secondary-color);
      border-color: var(--primary-color);
    }

    /* --- Main Content Area --- */
    main {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* --- Page Container --- */
    .page { 
      display: none; 
      flex-direction: column; 
      height: 100%;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    .page.active { display: flex; }
    
    /* --- Exclusive Deals Section --- */
    .exclusive-deals-wrapper {
      padding: 16px 0 16px 16px;
      background-color: var(--secondary-color);
    }
    .section-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 12px;
      padding-left: 4px; /* Align with cards */
    }
    .scrollable-deals {
      display: flex;
      overflow-x: auto;
      gap: 12px;
      padding-bottom: 12px;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .scrollable-deals::-webkit-scrollbar { display: none; }

    .deal-card {
      width: 180px;
      flex-shrink: 0;
      background: var(--card-bg);
      border-radius: var(--card-radius);
      box-shadow: var(--shadow-sm);
      position: relative;
      transition: transform .2s ease, box-shadow .2s ease;
      display: flex;
      flex-direction: column;
    }
    .deal-card .card-image {
        border-radius: var(--card-radius);
        overflow: hidden;
        position: relative;
    }
    .deal-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-md);
    }
    .deal-card img {
      width: 100%;
      height: 100px;
      object-fit: cover;
    }
    .deal-card-info {
      padding: 10px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .deal-card-name {
      font-weight: 700;
      font-size: 14px;
      line-height: 1.4;
      height: 2.8em; /* Reserve space for 2 lines */
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      word-break: break-word;
    }
    .deal-highlight {
        margin-top: 8px;
        text-align: center;
    }
    .deal-highlight-text {
        font-size: 11px;
        color: var(--light-text);
        display: block;
    }
    .deal-highlight-percent {
        font-size: 24px;
        font-weight: 700;
        color: var(--discount-color);
        line-height: 1;
    }
    .badge-exclusive {
      position: absolute;
      top: 8px;
      left: 8px;
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: white;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      font-size: 10px;
      font-weight: 700;
      padding: 4px 8px;
      border-radius: 6px;
      text-transform: uppercase;
      z-index: 2;
    }
    .deal-overlay-discount {
        position: absolute;
        bottom: 8px;
        right: 10px;
        background: var(--discount-color);
        color: white;
        border-radius: 50%;
        width: 48px;
        height: 48px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        line-height: 1;
        font-weight: 700;
        border: 3px solid white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        z-index: 3;
    }
    .deal-overlay-discount span:first-child {
        font-size: 10px;
        text-transform: uppercase;
    }
    .deal-overlay-discount strong {
        font-size: 18px;
    }

    /* --- Filter Controls --- */
    .filters-wrapper {
      background-color: var(--card-bg);
      padding: 16px;
      border-bottom: 1px solid #e9ecef;
      flex-shrink: 0;
    }
    
    .filters-wrapper input[type="search"] {
        width: 100%;
        padding: 10px 16px;
        font-size: 16px;
        border: 1px solid #ced4da;
        border-radius: var(--card-radius);
        margin-bottom: 12px;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    }
    .filters-wrapper input[type="search"]:focus {
        border-color: var(--primary-color);
        outline: 0;
        box-shadow: 0 0 0 0.2rem rgba(0, 106, 78, 0.25);
    }

    .scrollable-filters {
        display: flex;
        overflow-x: auto;
        gap: 8px;
        white-space: nowrap;
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollable-filters::-webkit-scrollbar { display: none; }

    .scrollable-filters select,
    .scrollable-filters button {
      flex: 0 0 auto;
      padding: 8px 14px;
      font-size: 14px;
      border: 1px solid #ced4da;
      border-radius: var(--card-radius);
      background: #fff;
    }

    .scrollable-filters button {
      cursor: pointer;
      border: none;
      transition: background-color 0.2s, transform 0.2s;
      color: #fff;
      font-weight: 700;
    }
    .scrollable-filters button:hover { transform: translateY(-1px); }
    .scrollable-filters .random-btn { background: var(--accent-color); }
    .scrollable-filters .random-btn:hover { background: #5cb85c; }
    .scrollable-filters .reset-btn { background: #757575; }
    .scrollable-filters .reset-btn:hover { background: #616161; }
    
    #selected-name-restaurant {
        display: block;
        text-align: center;
        padding-top: 12px;
        font-size: 14px;
        font-weight: bold;
        color: var(--primary-color);
    }
    
    /* --- Content List & Cards --- */
    .content-list {
      display: grid; grid-template-columns: 1fr;
      gap: 16px; padding: 16px;
      flex-grow: 1;
    }
    @media (min-width: 768px) { .content-list { grid-template-columns: repeat(2, 1fr); } }
    @media (min-width: 1280px) { .content-list { grid-template-columns: repeat(4, 1fr); } }

    .item-card-link { display: block; }
    .item-card {
      background: var(--card-bg); border-radius: var(--card-radius);
      overflow: hidden; box-shadow: var(--shadow-sm);
      transition: transform .3s ease, box-shadow .3s ease;
      height: 100%; display: flex; flex-direction: column;
    }
    .item-card-link:hover .item-card {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    .card-image { position: relative; }
    .card-image img {
      width: 100%; height: 250px;
      object-fit: cover; display: block;
      background-color: #eee;
    }
    .badge-discount {
      position: absolute; top: 12px; left: 12px;
      background: var(--discount-color); color: #fff;
      padding: 6px 12px; font-size: 14px; font-weight: 700;
      border-radius: 20px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      animation: pulse 1.5s infinite;
      z-index: 1;
    }
    .badge-ad {
        position: absolute;
        top: 12px;
        right: 12px;
        background-color: rgba(33, 33, 33, 0.7);
        color: white;
        font-size: 11px;
        font-weight: 700;
        padding: 4px 8px;
        border-radius: 6px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        z-index: 1;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    .item-info {
      padding: 16px; flex-grow: 1;
      display: flex; flex-direction: column;
    }
    .item-name {
      font-size: 18px; font-weight: 700;
      margin-bottom: 8px; line-height: 1.4;
    }
    .rating {
      display: inline-flex; align-items: center; gap: 4px;
      background: #FFB74D; color: #fff;
      padding: 4px 10px; font-size: 13px; font-weight: 700;
      border-radius: 6px; margin-right: 8px;
    }
    .meta {
      font-size: 14px; color: var(--light-text);
      margin: 4px 0; display: block;
    }
    .location::before { content: '📍'; margin-right: 6px; }
    .green-score-container, .amenities-container { margin-top: auto; padding-top: 12px; }
    .green-score-label {
      font-size: 12px; color: var(--light-text); margin-bottom: 4px;
    }
    .green-score-bar {
      width: 100%; background: #e9ecef; border-radius: 4px;
      overflow: hidden; height: 8px;
    }
    .green-score-fill {
      height: 100%; background: var(--primary-color);
      transition: width 0.5s ease-in-out;
    }
    .amenities-list { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 4px; }
    .amenity-tag {
      background: var(--secondary-color); color: var(--primary-color);
      font-size: 12px; padding: 4px 10px; border-radius: 16px;
      font-weight: 500;
    }
    .highlight {
      box-shadow: 0 0 0 3px var(--primary-color);
      border: 1px solid var(--primary-color);
    }
    .message-box {
        text-align: center; padding: 40px 20px;
        color: var(--light-text); font-size: 16px;
        grid-column: 1 / -1;
    }

    /* Mobile Adjustments */
    @media (max-width: 768px) {
        :root {
            --header-height: 60px;
            --nav-height: 70px;
        }
        
        .header-logo {
            height: 40px;
        }
        .header-title {
            font-size: 14px;
        }

        .main-nav {
            gap: 0.5rem;
        }
        .nav-item svg {
            width: 24px;
            height: 24px;
        }
        .nav-item span {
            font-size: 12px;
        }
        
        .card-image img {
            height: 200px;
        }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://github.com/slapknot/BCDSCGG3/blob/main/Cortable.png?raw=true" alt="CORTABLE Logo" class="header-logo">
    <span class="header-title"> Where Business Meets Taste
 </span>
  </header>

  <nav class="main-nav">
    <a href="#restaurants" class="nav-item active" data-page="restaurants">
      <svg viewBox="0 0 24 24"><path d="M11,9H9V2H7V9H5V2H3V9C3,11.12 4.66,12.84 6.75,12.97V22H9.25V13C10.19,12.89 11,12.05 11,11.1V9M16,2V22H18V2H16Z"></path></svg>
      <span>ร้านอาหาร</span>
    </a>
    <a href="#hotels" class="nav-item" data-page="hotels">
      <svg viewBox="0 0 24 24"><path d="M19,7H11V14H3V5H1V20H3V17H21V20H23V11A4,4 0 0,0 19,7M7,13A3,3 0 0,0 10,10A3,3 0 0,0 7,7A3,3 0 0,0 4,10A3,3 0 0,0 7,13Z"></path></svg>
      <span>โรงแรม</span>
    </a>
    <a href="#lifestyle" class="nav-item" data-page="lifestyle">
      <svg viewBox="0 0 24 24"><path d="M12,17.27L18.18,21L17,14.64L22,9.24L15.81,8.62L12,3L8.19,8.62L2,9.24L7,14.64L5.82,21L12,17.27Z"></path></svg>
      <span>ไลฟ์สไตล์</span>
    </a>
  </nav>

  <main>
    <!-- Restaurants Page -->
    <div id="page-restaurants" class="page active">
      <div class="exclusive-deals-wrapper">
        <h2 class="section-title">Exclusive Deals</h2>
        <div class="scrollable-deals" id="exclusive-deals-restaurant"></div>
      </div>
      <div class="filters-wrapper">
        <input type="search" id="search-input-restaurant" placeholder="ค้นหาร้านอาหาร...">
        <div class="scrollable-filters">
          <select id="filter-province-restaurant"><option value="">จังหวัด</option></select>
          <select id="filter-district-restaurant" disabled><option value="">อำเภอ/เขต</option></select>
          <select id="filter-type-restaurant"><option value="">ประเภทอาหาร</option><option value="buffet">บุฟเฟ่ต์</option><option value="asian">เอเชีย</option><option value="western">ตะวันตก</option></select>
          <select id="filter-dining-style-restaurant"><option value="">ประเภทการรับประทาน</option><option value="ทั่วไป">รับประทานทั่วไป</option><option value="ทั่วไปและจัดเลี้ยง">รับประทานทั่วไปและจัดเลี้ยง</option></select>
          <select id="filter-price-restaurant"><option value="">ราคา (฿)</option><option value="0-200">0 – 200</option><option value="201-500">201 – 500</option><option value="501-1000">501 – 1000</option><option value="1001-">1001+</option></select>
          <select id="sort-order-restaurant"><option value="">จัดเรียง</option><option value="price_desc">ราคาสูง-ต่ำ</option><option value="rating_desc">คะแนนสูง-ต่ำ</option><option value="discount_desc">ส่วนลด สูง-ต่ำ</option></select>
          <button id="random-btn-restaurant" class="random-btn">สุ่มร้าน</button>
          <button id="reset-btn-restaurant" class="reset-btn">ล้างค่า</button>
        </div>
        <span id="selected-name-restaurant"></span>
      </div>
      <div id="restaurants-list" class="content-list">
        <div class="message-box">กำลังโหลด...</div>
      </div>
    </div>

    <!-- Hotels Page -->
    <div id="page-hotels" class="page">
      <div class="exclusive-deals-wrapper">
        <h2 class="section-title">Exclusive Deals</h2>
        <div class="scrollable-deals" id="exclusive-deals-hotel"></div>
      </div>
      <div class="filters-wrapper">
        <input type="search" id="search-input-hotel" placeholder="ค้นหาโรงแรม...">
        <div class="scrollable-filters">
          <select id="filter-province-hotel"><option value="">จังหวัด</option></select>
          <select id="filter-price-hotel"><option value="">ราคา/คืน (฿)</option><option value="0-3000">0 - 3000</option><option value="3001-5000">3001 - 5000</option><option value="5001-">5001+</option></select>
          <select id="filter-rating-hotel"><option value="">ระดับดาว</option><option value="3">3 ★</option><option value="4">4 ★</option><option value="5">5 ★</option></select>
          <button id="reset-btn-hotel" class="reset-btn">ล้างค่า</button>
        </div>
      </div>
      <div id="hotels-list" class="content-list">
        <div class="message-box">เลือกตัวกรองเพื่อค้นหาโรงแรม</div>
      </div>
    </div>

    <!-- Lifestyle Page -->
    <div id="page-lifestyle" class="page">
      <div class="exclusive-deals-wrapper">
        <h2 class="section-title">Exclusive Deals</h2>
        <div class="scrollable-deals" id="exclusive-deals-lifestyle"></div>
      </div>
      <div class="filters-wrapper">
        <input type="search" id="search-input-lifestyle" placeholder="ค้นหาไลฟ์สไตล์...">
        <div class="scrollable-filters">
          <select id="filter-category-lifestyle"><option value="">ทุกประเภท</option><option value="สนามกอล์ฟ">สนามกอล์ฟ</option><option value="โรงภาพยนตร์">โรงภาพยนตร์</option><option value="ฟิตเนส">ฟิตเนส</option><option value="ร้านนวด">ร้านนวด</option><option value="สปา">สปา</option></select>
          <select id="filter-province-lifestyle"><option value="">จังหวัด</option></select>
          <select id="sort-order-lifestyle"><option value="">จัดเรียง</option><option value="discount_desc">ส่วนลด สูง-ต่ำ</option></select>
          <button id="reset-btn-lifestyle" class="reset-btn">ล้างค่า</button>
        </div>
      </div>
      <div id="lifestyle-list" class="content-list">
         <div class="message-box">เลือกตัวกรองเพื่อค้นหา</div>
      </div>
    </div>
  </main>

<script>
document.addEventListener('DOMContentLoaded', () => {

  // --- DATA ---
  const restaurantData = [
    {id: 1, name:'ร้านบ้านสวนออร์แกนิก',discount:10,greenScore:92,rating:4.7,province:'ชลบุรี',district:'ศรีราชา',type:'buffet',price:450, image: 'https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไปและจัดเลี้ยง'},
    {id: 2, name:'ส้มตำแม่บุญช่วย',discount:15,greenScore:75,rating:4.3,province:'ขอนแก่น',district:'เมืองขอนแก่น',type:'asian',price:129, image: 'https://images.pexels.com/photos/2347311/pexels-photo-2347311.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไป'},
    {id: 3, name:'SteakHouse Prime',discount:20,greenScore:60,rating:4.8,province:'กรุงเทพฯ',district:'วัฒนา',type:'western',price:1299, image: 'https://images.pexels.com/photos/1251208/pexels-photo-1251208.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: true, diningStyle: 'ทั่วไปและจัดเลี้ยง'},
    {id: 4, name:'ก๋วยเตี๋ยวเรือนายโอ',discount:5,greenScore:55,rating:4.2,province:'นครราชสีมา',district:'ปากช่อง',type:'asian',price:89, image: 'https://cms.dmpcdn.com/food/2020/06/08/a511be30-a951-11ea-9cca-0796b916f819_original.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไป'},
    {id: 5, name:'La Pizzeria Italiano',discount:25,greenScore:80,rating:4.6,province:'เชียงใหม่',district:'เมืองเชียงใหม่',type:'western',price:550, image: 'https://images.pexels.com/photos/1146760/pexels-photo-1146760.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไปและจัดเลี้ยง'},
    {id: 6, name:'Buffet ซีฟู้ดเดลิเวอรี่',discount:30,greenScore:95,rating:4.9,province:'ภูเก็ต',district:'ราไวย์',type:'buffet',price:799, image: 'https://s359.kapook.com/rq/600/auto/50/pagebuilder/30a38cbd-9a54-4eb9-b39c-b4386d299cc2.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไปและจัดเลี้ยง'},
    {id: 7, name:'ร้านข้าวแกงปักษ์ใต้',discount:12,greenScore:65,rating:4.1,province:'นครศรีธรรมราช',district:'เมืองนครศรีธรรมราษฎร์',type:'asian',price:159, image: 'https://mpics-cdn-acc.mgronline.com/pics/Images/562000007549101.JPEG?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไป'},
    {id: 8, name:'Sushi Master',discount:18,greenScore:85,rating:4.5,province:'กรุงเทพฯ',district:'บางรัก',type:'asian',price:899, image: 'https://www.kikkoman.eu/fileadmin/_processed_/4/2/csm_sushi-kakkoii_eb92ad14ee.webp?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: true, diningStyle: 'ทั่วไป'},
    {id: 9, name:'Curry & Rice',discount:22,greenScore:70,rating:4.4,province:'สุพรรณบุรี',district:'อู่ทอง',type:'asian',price:199, image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTm9O98aT5wpQDEu5vNOgg0DeUIYK_5vXtvIw&s?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไป'},
    {id: 10, name:'Burger Town',discount:8,greenScore:50,rating:4.0,province:'ชุมพร',district:'เมืองชุมพร',type:'western',price:299, image: 'https://images.pexels.com/photos/1639562/pexels-photo-1639562.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', isAd: false, diningStyle: 'ทั่วไป'}
  ];
  const hotelData = [
    {id: 1, name: 'Grand Hotel', province: 'กรุงเทพฯ', price: 5500, rating: 5, amenities: ['สระว่ายน้ำ', 'สปา', 'ฟิตเนส'], discount: 15, image: 'https://images.pexels.com/photos/258154/pexels-photo-258154.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', type: 'โรงแรม'},
    {id: 2, name: 'Chiang Mai Mountain Retreat', province: 'เชียงใหม่', price: 3800, rating: 4, amenities: ['วิวภูเขา', 'รวมอาหารเช้า'], discount: 20, image: 'https://images.pexels.com/photos/189296/pexels-photo-189296.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', type: 'โรงแรม'},
    {id: 3, name: 'Phuket Beachside Resort', province: 'ภูเก็ต', price: 4500, rating: 4, amenities: ['ติดชายหาด', 'กีฬาทางน้ำ'], discount: 10, image: 'https://images.pexels.com/photos/261102/pexels-photo-261102.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', type: 'โรงแรม'}
  ];
  const lifestyleData = [
    {id: 1, category: 'สนามกอล์ฟ', name: 'Siam Country Club', province: 'ชลบุรี', discount: 10, details: ['18 หลุม x 4 สนาม', 'คลับเฮาส์หรู'], image: 'https://storage.googleapis.com/gdwp/2017/12/1-2BlackMountain_2.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.9},
    {id: 2, category: 'สนามกอล์ฟ', name: 'Alpine Golf Club', province: 'กรุงเทพฯ', discount: 15, details: ['สนามแชมเปี้ยนชิพ', 'ท้าทาย'], image: 'https://storage.googleapis.com/gdwp/2017/12/3-2rancho.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.8},
    {id: 3, category: 'สนามกอล์ฟ', name: 'Blue Canyon Country Club', province: 'ภูเก็ต', discount: 5, details: ['เคยจัดทัวร์นาเมนต์', 'หรูหรา'], image: 'https://storage.googleapis.com/gdwp/2017/12/3-1bonanza02.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.7},
    {id: 4, category: 'โรงภาพยนตร์', name: 'Cinema Paradise', province: 'กรุงเทพฯ', discount: 25, details: ['ส่วนลดตั๋วหนัง', 'ระบบ IMAX', 'Dolby Atmos'], image: 'https://images.pexels.com/photos/7991579/pexels-photo-7991579.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.5},
    {id: 5, category: 'โรงภาพยนตร์', name: 'The Premiere Screen', province: 'กรุงเทพฯ', discount: 20, details: ['ส่วนลดตั๋วหนัง', 'ที่นั่งโซฟา', 'บริการเลานจ์'], image: 'https://images.pexels.com/photos/379964/pexels-photo-379964.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.8},
    {id: 6, category: 'โรงภาพยนตร์', name: 'Family Cineplex', province: 'ชลบุรี', discount: 30, details: ['ส่วนลดตั๋วหนัง', 'โปรแกรมสำหรับเด็ก', 'Kids Cinema'], image: 'https://images.pexels.com/photos/33129/popcorn-movie-party-entertainment.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.2},
    {id: 7, category: 'ฟิตเนส', name: 'Fitness First - Siam Paragon', province: 'กรุงเทพฯ', discount: 15, details: ['ส่วนลดค่าสมาชิกรายปี', 'คลาสโยคะ', 'สระว่ายน้ำ'], image: 'https://images.pexels.com/photos/1954524/pexels-photo-1954524.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.7},
    {id: 8, category: 'ฟิตเนส', name: 'Jetts 24 Hour Fitness', province: 'เชียงใหม่', discount: 10, details: ['ส่วนลดค่าสมาชิก', 'เปิด 24 ชั่วโมง'], image: 'https://images.pexels.com/photos/841130/pexels-photo-841130.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.4},
    {id: 9, category: 'ฟิตเนส', name: 'Virgin Active', province: 'กรุงเทพฯ', discount: 20, details: ['ส่วนลดค่าสมาชิก', 'ห้องปีนผาจำลอง', 'คลาสหลากหลาย'], image: 'https://images.pexels.com/photos/3768916/pexels-photo-3768916.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.8},
    {id: 10, category: 'ฟิตเนส', name: 'The Lab BKK', province: 'กรุงเทพฯ', discount: 25, details: ['ส่วนลด Personal Training', 'Functional Training'], image: 'https://images.pexels.com/photos/3076516/pexels-photo-3076516.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.9},
    {id: 11, category: 'ร้านนวด', name: 'Let\'s Relax Spa', province: 'กรุงเทพฯ', discount: 15, details: ['นวดไทย', 'นวดเท้า', 'ออนเซ็น'], image: 'https://images.pexels.com/photos/3768894/pexels-photo-3768894.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.8},
    {id: 12, category: 'ร้านนวด', name: 'Health Land', province: 'กรุงเทพฯ', discount: 10, details: ['นวดแผนไทย', 'นวดประคบสมุนไพร'], image: 'https://images.pexels.com/photos/3757955/pexels-photo-3757955.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.5},
    {id: 13, category: 'ร้านนวด', name: 'Oasis Spa', province: 'เชียงใหม่', discount: 20, details: ['นวดล้านนา', 'สปาทรีทเมนท์'], image: 'https://images.pexels.com/photos/3997989/pexels-photo-3997989.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.9},
    {id: 14, category: 'สปา', name: 'Divana Scentuara Spa', province: 'กรุงเทพฯ', discount: 25, details: ['สปาหรู', 'ทรีทเมนท์ออร์แกนิก'], image: 'https://images.pexels.com/photos/3738349/pexels-photo-3738349.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.9},
    {id: 15, category: 'สปา', name: 'Banyan Tree Spa', province: 'ภูเก็ต', discount: 15, details: ['สปาในโรงแรม', 'วิวทะเล'], image: 'https://images.pexels.com/photos/7262995/pexels-photo-7262995.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 5.0},
    {id: 16, category: 'สปา', name: 'Panpuri Wellness', province: 'กรุงเทพฯ', discount: 20, details: ['ออนเซ็น', 'สปาออร์แกนิก'], image: 'https://images.pexels.com/photos/3985321/pexels-photo-3985321.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.8},
    {id: 17, category: 'สปา', name: 'RarinJinda Wellness Spa', province: 'เชียงใหม่', discount: 10, details: ['เวลเนสสปา', 'ไฮโดรเธอราพี'], image: 'https://images.pexels.com/photos/3212164/pexels-photo-3212164.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2', rating: 4.7}
  ];

  // --- PAGE NAVIGATION ---
  const navItems = document.querySelectorAll('.nav-item');
  const pages = document.querySelectorAll('.page');
  
  function navigateToPage(pageId) {
      navItems.forEach(nav => nav.classList.toggle('active', nav.dataset.page === pageId));
      pages.forEach(page => page.classList.toggle('active', page.id === `page-${pageId}`));
      window.location.hash = pageId;
  }

  navItems.forEach(item => {
    item.addEventListener('click', (e) => {
      e.preventDefault();
      navigateToPage(item.dataset.page);
    });
  });

  const initialPage = window.location.hash.replace('#', '') || 'restaurants';
  navigateToPage(initialPage);

  // --- SHARED FUNCTIONS ---
  function populateFilter(selectElement, data, key) {
    const uniqueValues = [...new Set(data.map(item => item[key]))].sort();
    uniqueValues.forEach(val => {
      let opt = document.createElement('option');
      opt.value = val;
      opt.text = val;
      selectElement.add(opt);
    });
  }

  function createItemCard(item, isExclusiveDeal = false) {
    const link = document.createElement('a');
    let itemType = '';
    let linkTarget = '#';

    if ('greenScore' in item) {
        itemType = 'restaurant';
        linkTarget = `restaurant-detail.html?id=${item.id}`;
    } else if ('amenities' in item) {
        itemType = 'hotel';
        linkTarget = `hotel-detail.html?id=${item.id}`;
    } else if ('category' in item) {
        itemType = 'lifestyle';
        linkTarget = `lifestyle-detail.html?id=${item.id}`;
    }

    link.href = linkTarget;
    link.className = isExclusiveDeal ? '' : 'item-card-link';

    const card = document.createElement('div');
    card.className = isExclusiveDeal ? 'deal-card' : 'item-card';
    const imageSrc = item.image || `https://placehold.co/600x400/eeeeee/cccccc?text=No+Image`;

    let detailsHtml = '';

    if (isExclusiveDeal) {
        card.innerHTML = `
            <div class="card-image">
                <img src="${imageSrc}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/eeeeee/cccccc?text=Image+Error';">
                <div class="badge-exclusive">Exclusive Deal</div>
                <div class="deal-overlay-discount">
                    <span>ลด</span>
                    <strong>${item.discount}%</strong>
                </div>
            </div>
            <div class="deal-card-info">
                <div>
                    <div class="deal-card-name">${item.name}</div>
                    <div class="meta">${item.category || item.type || ''}</div>
                </div>
            </div>
        `;
    } else {
        if (itemType === 'restaurant') {
          detailsHtml = `
            <div><span class="rating">${item.rating} ★</span><span class="meta"> ฿${item.price}</span></div>
            <div class="meta">ประเภท: ${item.type}</div>
            <div class="meta location">${item.district}, ${item.province}</div>
            <div class="green-score-container">
              <div class="green-score-label">Green Score: ${item.greenScore}</div>
              <div class="green-score-bar"><div class="green-score-fill" style="width: ${item.greenScore}%;"></div></div>
            </div>
          `;
        } else if (itemType === 'hotel') {
          detailsHtml = `
            <div>
              <span class="rating">${'★'.repeat(item.rating)}</span>
              <span class="meta"> ฿${item.price}/คืน</span>
            </div>
            <div class="meta location">${item.province}</div>
            <div class="amenities-container">
              <div class="amenities-list">${item.amenities.map(a => `<span class="amenity-tag">${a}</span>`).join('')}</div>
            </div>
          `;
        } else if (itemType === 'lifestyle') {
          detailsHtml = `
            <div><span class="rating">${item.rating} ★</span><span class="meta"> ${item.category}</span></div>
            <div class="meta location">${item.province}</div>
            <div class="amenities-container">
              <div class="amenities-list">${item.details.map(d => `<span class="amenity-tag">${d}</span>`).join('')}</div>
            </div>
          `;
        }

        card.innerHTML = `
            <div class="card-image">
                <img src="${imageSrc}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/eeeeee/cccccc?text=Image+Error';">
                ${item.isAd ? '<div class="badge-ad">Ad</div>' : ''}
                ${item.discount ? `<div class="badge-discount">-${item.discount}%</div>` : ''}
            </div>
            <div class="item-info">
                <div><div class="item-name">${item.name}</div></div>
                ${detailsHtml}
            </div>
        `;
    }
    
    link.appendChild(card);
    return link;
  }

  function findAndRenderTopDeals() {
    const findTop = (data, category = null) => {
        let list = data;
        if (category) {
            list = data.filter(item => item.category === category);
        } else if (data.length > 0 && !data[0].category) { // Heuristic for restaurant/hotel
            list = data;
        }
        
        if (list.length === 0) return null;
        
        let topItem = list.reduce((prev, current) => (prev.discount > current.discount) ? prev : current);
        
        // Add type for rendering deal card correctly
        if (!topItem.category && !topItem.type) {
            if ('amenities' in topItem) topItem.type = 'โรงแรม';
            else if ('greenScore' in topItem) topItem.type = 'ร้านอาหาร';
        }
        return topItem;
    };

    const allTopDeals = [
        findTop(restaurantData),
        findTop(hotelData),
        findTop(lifestyleData, 'สนามกอล์ฟ'),
        findTop(lifestyleData, 'โรงภาพยนตร์'),
        findTop(lifestyleData, 'ฟิตเนส'),
        findTop(lifestyleData, 'ร้านนวด'),
        findTop(lifestyleData, 'สปา')
    ].filter(item => item !== null); 

    const dealContainers = document.querySelectorAll('.scrollable-deals');
    
    dealContainers.forEach(container => {
        container.innerHTML = '';
        allTopDeals.forEach(deal => {
            container.appendChild(createItemCard(deal, true));
        });
    });
  }

  // --- RESTAURANT LOGIC ---
  (function initRestaurants() {
    const page = document.getElementById('page-restaurants');
    const listEl = page.querySelector('.content-list');
    const searchInput = page.querySelector('input[type="search"]');
    const provinceFilter = page.querySelector('#filter-province-restaurant');
    const districtFilter = page.querySelector('#filter-district-restaurant');
    const typeFilter = page.querySelector('#filter-type-restaurant');
    const diningStyleFilter = page.querySelector('#filter-dining-style-restaurant');
    const priceFilter = page.querySelector('#filter-price-restaurant');
    const sortOrder = page.querySelector('#sort-order-restaurant');
    const randomBtn = page.querySelector('.random-btn');
    const resetBtn = page.querySelector('.reset-btn');
    const selectedNameEl = page.querySelector('#selected-name-restaurant');
    let randomInterval = null;
    
    let allAdRestaurants = [];
    let potentialFeaturedGreen = [];
    let baseRestaurantList = [];

    function setupInitialLists() {
        const allRestaurants = [...restaurantData];
        allAdRestaurants = allRestaurants.filter(r => r.isAd);
        const nonAdRestaurants = allRestaurants.filter(r => !r.isAd);

        const top20PercentCount = Math.ceil(nonAdRestaurants.length * 0.2);
        potentialFeaturedGreen = [...nonAdRestaurants].sort((a, b) => b.greenScore - a.greenScore).slice(0, top20PercentCount);
        
        const potentialFeaturedIds = potentialFeaturedGreen.map(r => r.id);
        baseRestaurantList = nonAdRestaurants.filter(r => !potentialFeaturedIds.includes(r.id));
    }

    populateFilter(provinceFilter, restaurantData, 'province');

    function applyFilters() {
        if (randomInterval) clearInterval(randomInterval);
        selectedNameEl.textContent = '';

        const term = searchInput.value.trim().toLowerCase();
        
        const matchesFilters = (r) => {
            if (term && !r.name.toLowerCase().includes(term)) return false;
            if (provinceFilter.value && r.province !== provinceFilter.value) return false;
            if (districtFilter.value && r.district !== districtFilter.value) return false;
            if (typeFilter.value && r.type !== typeFilter.value) return false;
            if (diningStyleFilter.value && r.diningStyle !== diningStyleFilter.value) return false;
            if (priceFilter.value) {
                const [min, max] = priceFilter.value.split('-');
                if (min && r.price < +min) return false;
                if (max && max !== '' && r.price > +max) return false;
            }
            return true;
        };

        const displayableAds = allAdRestaurants.filter(matchesFilters);
        
        const filteredPotentialGreen = potentialFeaturedGreen.filter(matchesFilters);
        const featuredCount = Math.ceil(baseRestaurantList.length * 0.1);
        const displayableFeaturedGreen = [...filteredPotentialGreen].sort(() => 0.5 - Math.random()).slice(0, featuredCount);
        
        const featuredIds = displayableFeaturedGreen.map(r => r.id);
        const nonFeaturedGreen = filteredPotentialGreen.filter(r => !featuredIds.includes(r.id));
        
        let displayableBase = [...baseRestaurantList.filter(matchesFilters), ...nonFeaturedGreen];

        if (sortOrder.value) {
            const [key, dir] = sortOrder.value.split('_');
            displayableBase.sort((a, b) => dir === 'desc' ? b[key] - a[key] : a[key] - b[key]);
        }
        
        const fullListToRender = [...displayableAds, ...displayableFeaturedGreen, ...displayableBase];
        render(fullListToRender);
    }
    
    function render(data) {
      listEl.innerHTML = '';
      if (data.length === 0) {
        listEl.innerHTML = '<div class="message-box">ไม่พบร้านอาหารที่ตรงกับเงื่อนไข</div>';
        return;
      }
      data.forEach(r => listEl.appendChild(createItemCard(r)));
    }
    
    function updateDistricts() {
        const prov = provinceFilter.value;
        districtFilter.innerHTML = '<option value="">อำเภอ/เขต</option>';
        districtFilter.disabled = !prov;
        if (prov) {
            const districts = [...new Set(restaurantData.filter(r => r.province === prov).map(r => r.district))].sort();
            districts.forEach(d => {
                let opt = document.createElement('option');
                opt.value = opt.text = d;
                districtFilter.add(opt);
            });
        }
        applyFilters();
    }

    function handleRandomClick() {
        if (randomInterval) clearInterval(randomInterval);
        const cards = Array.from(listEl.querySelectorAll('.item-card'));
        if (!cards.length) return;

        selectedNameEl.textContent = 'กำลังสุ่ม...';
        cards.forEach(c => c.classList.remove('highlight'));

        let idx = 0;
        const totalSpins = cards.length * 2 + Math.floor(Math.random() * cards.length);
        let counter = 0;

        randomInterval = setInterval(() => {
            cards.forEach(c => c.classList.remove('highlight'));
            if (cards[idx]) {
                cards[idx].classList.add('highlight');
            }
            idx = (idx + 1) % cards.length;
            if (counter++ > totalSpins) {
                clearInterval(randomInterval);
                randomInterval = null;
                const finalIndex = idx > 0 ? idx - 1 : cards.length - 1;
                cards.forEach(c => c.classList.remove('highlight'));
                const selectedCard = cards[finalIndex];
                if (selectedCard) {
                    selectedCard.classList.add('highlight');
                    selectedCard.parentElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    selectedNameEl.textContent = `ร้านที่เลือก: ${selectedCard.querySelector('.item-name').textContent}`;
                }
            }
        }, 100);
    }

    function reset() {
      searchInput.value = '';
      provinceFilter.value = '';
      typeFilter.value = '';
      diningStyleFilter.value = '';
      priceFilter.value = '';
      sortOrder.value = '';
      updateDistricts();
    }

    searchInput.addEventListener('input', applyFilters);
    provinceFilter.addEventListener('change', updateDistricts);
    districtFilter.addEventListener('input', applyFilters);
    typeFilter.addEventListener('input', applyFilters);
    diningStyleFilter.addEventListener('input', applyFilters);
    priceFilter.addEventListener('input', applyFilters);
    sortOrder.addEventListener('input', applyFilters);
    randomBtn.addEventListener('click', handleRandomClick);
    resetBtn.addEventListener('click', reset);
    
    setupInitialLists();
    applyFilters();
  })();

  // --- HOTEL LOGIC ---
  (function initHotels() {
    const page = document.getElementById('page-hotels');
    const listEl = page.querySelector('.content-list');
    const searchInput = page.querySelector('input[type="search"]');
    const provinceFilter = page.querySelector('#filter-province-hotel');
    const priceFilter = page.querySelector('#filter-price-hotel');
    const ratingFilter = page.querySelector('#filter-rating-hotel');
    const resetBtn = page.querySelector('.reset-btn');

    populateFilter(provinceFilter, hotelData, 'province');

    function applyFilters() {
      const term = searchInput.value.trim().toLowerCase();
      let data = hotelData.filter(h => {
        if (term && !h.name.toLowerCase().includes(term)) return false;
        if (provinceFilter.value && h.province !== provinceFilter.value) return false;
        if (ratingFilter.value && h.rating != ratingFilter.value) return false;
        if (priceFilter.value) {
          const [min, max] = priceFilter.value.split('-');
          if (min && h.price < +min) return false;
          if (max && max !== '' && h.price > +max) return false;
        }
        return true;
      });
      render(data);
    }

    function render(data) {
      listEl.innerHTML = '';
      if (data.length === 0) {
        listEl.innerHTML = '<div class="message-box">ไม่พบโรงแรมที่ตรงกับเงื่อนไข</div>';
        return;
      }
      data.forEach(h => listEl.appendChild(createItemCard(h)));
    }

    function reset() {
      searchInput.value = '';
      provinceFilter.value = '';
      priceFilter.value = '';
      ratingFilter.value = '';
      applyFilters();
    }

    searchInput.addEventListener('input', applyFilters);
    provinceFilter.addEventListener('input', applyFilters);
    priceFilter.addEventListener('input', applyFilters);
    ratingFilter.addEventListener('input', applyFilters);
    resetBtn.addEventListener('click', reset);
    applyFilters();
  })();

  // --- LIFESTYLE LOGIC ---
  (function initLifestyle() {
    const page = document.getElementById('page-lifestyle');
    const listEl = page.querySelector('.content-list');
    const searchInput = page.querySelector('input[type="search"]');
    const categoryFilter = page.querySelector('#filter-category-lifestyle');
    const provinceFilter = page.querySelector('#filter-province-lifestyle');
    const sortOrder = page.querySelector('#sort-order-lifestyle');
    const resetBtn = page.querySelector('.reset-btn');

    populateFilter(provinceFilter, lifestyleData, 'province');

    function applyFilters() {
      const term = searchInput.value.trim().toLowerCase();
      let data = lifestyleData.filter(item => {
        if (term && !item.name.toLowerCase().includes(term)) return false;
        if (provinceFilter.value && item.province !== provinceFilter.value) return false;
        if (categoryFilter.value && item.category !== categoryFilter.value) return false;
        return true;
      });

      if (sortOrder.value === 'discount_desc') {
        data.sort((a,b) => b.discount - a.discount);
      }
      render(data);
    }

    function render(data) {
      listEl.innerHTML = '';
      if (data.length === 0) {
        listEl.innerHTML = '<div class="message-box">ไม่พบข้อมูลที่ตรงกับเงื่อนไข</div>';
        return;
      }
      data.forEach(item => listEl.appendChild(createItemCard(item)));
    }

    function reset() {
      searchInput.value = '';
      provinceFilter.value = '';
      categoryFilter.value = '';
      sortOrder.value = '';
      applyFilters();
    }

    searchInput.addEventListener('input', applyFilters);
    provinceFilter.addEventListener('input', applyFilters);
    categoryFilter.addEventListener('input', applyFilters);
    sortOrder.addEventListener('input', applyFilters);
    resetBtn.addEventListener('click', reset);
    applyFilters();
  })();
  
  // --- Initial setup for all pages ---
  findAndRenderTopDeals();

});
</script>
</body>
</html>
